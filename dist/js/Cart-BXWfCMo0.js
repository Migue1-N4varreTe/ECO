import{j as e,a7 as s,ag as a,aA as t,aB as l,aC as i,aD as c,az as r,aE as n,at as d,ap as x,aF as m}from"./chunk-D1ivKm1I.js";import{a as o,L as h}from"./chunk-CNNdbZTC.js";import{k as j,l as p,N as g,B as u,C as N,e as v,b as f,d as y,I as b}from"./index-17eEFbcJ.js";import{G as w}from"./chunk-C51-zONU.js";import{S as k}from"./chunk-BZj8Mp6R.js";import{u as C}from"./chunk-DqMloB5Z.js";import"./chunk-DGERTDnL.js";import"./chunk-BdChqvju.js";import"./chunk-B5XYL1Sr.js";import"./chunk-Cw3qc0hc.js";const P=()=>{const{cartItems:P,cartProducts:S,cartCount:E,cartSubtotal:$}=j(),{updateQuantityWithValidation:F,removeFromCartWithNotification:z,clearCartWithConfirmation:q}=C(),[M,W]=o.useState("express"),[D,A]=o.useState(""),[G,L]=o.useState(!1),T=p.find(e=>e.id===M),I=(null==T?void 0:T.price)||0,O="WELCOME10"===D?.1*$:0,V=$+I-O;return 0===P.length?e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(g,{}),e.jsx("div",{className:"container px-4 py-16",children:e.jsxs("div",{className:"max-w-md mx-auto text-center",children:[e.jsx("div",{className:"w-24 h-24 mx-auto mb-6 bg-gray-100 rounded-full flex items-center justify-center",children:e.jsx(s,{className:"w-12 h-12 text-gray-400"})}),e.jsx("h1",{className:"font-display font-bold text-2xl text-gray-900 mb-4",children:"Tu carrito está vacío"}),e.jsx("p",{className:"text-gray-600 mb-8",children:"Parece que aún no has agregado productos a tu carrito. ¡Explora nuestra tienda y encuentra lo que necesitas!"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(u,{size:"lg",className:"w-full btn-gradient",asChild:!0,children:e.jsx(h,{to:"/shop",children:"Explorar productos"})}),e.jsx(u,{variant:"outline",size:"lg",className:"w-full",asChild:!0,children:e.jsx(h,{to:"/offers",children:"Ver ofertas especiales"})})]})]})})]}):e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(g,{}),e.jsxs("div",{className:"container px-4 py-8",children:[e.jsx("div",{className:"mb-6",children:e.jsx(w,{})}),e.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[e.jsx(u,{variant:"ghost",size:"sm",asChild:!0,children:e.jsxs(h,{to:"/shop",children:[e.jsx(a,{className:"w-4 h-4 mr-2"}),"Seguir comprando"]})}),e.jsxs("div",{children:[e.jsx("h1",{className:"font-display font-bold text-3xl text-gray-900",children:"Mi carrito"}),e.jsxs("p",{className:"text-gray-600",children:[E," ",1===E?"producto seleccionado":"productos seleccionados"]})]})]}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[S.map((s,a)=>{const c=s.originalPrice?Math.round((s.originalPrice-s.price)/s.originalPrice*100):0;return e.jsx(N,{className:"animate-slide-in delay-"+100*a,children:e.jsx(v,{className:"p-6",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-lg overflow-hidden flex-shrink-0",children:e.jsx("img",{src:s.image,alt:s.name,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 line-clamp-1",children:s.name}),s.brand&&e.jsx("p",{className:"text-sm text-gray-500",children:s.brand})]}),e.jsx(u,{variant:"ghost",size:"sm",onClick:()=>z(s.id,s.name),className:"text-gray-400 hover:text-red-500",children:e.jsx(t,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"flex items-center gap-2 mb-3",children:s.inStock?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-sm text-gray-600",children:"En stock"}),s.stock<=5&&e.jsxs(f,{variant:"outline",className:"text-xs",children:["Quedan ",s.stock]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),e.jsx("span",{className:"text-sm text-red-600",children:"Agotado"})]})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"font-bold text-lg text-gray-900",children:["$",s.price]}),s.originalPrice&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"text-sm text-gray-500 line-through",children:["$",s.originalPrice]}),c>0&&e.jsxs(f,{className:"bg-red-500 text-white text-xs",children:["-",c,"%"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{variant:"outline",size:"sm",onClick:()=>F(s.id,s.quantity-1),disabled:!s.inStock,className:"w-8 h-8 p-0",children:e.jsx(l,{className:"w-4 h-4"})}),e.jsx("span",{className:"w-8 text-center font-medium",children:s.quantity}),e.jsx(u,{variant:"outline",size:"sm",onClick:()=>F(s.id,s.quantity+1,s.stock),disabled:!s.inStock||s.quantity>=s.stock,className:"w-8 h-8 p-0",children:e.jsx(i,{className:"w-4 h-4"})})]})]}),e.jsx("div",{className:"mt-2 text-right",children:e.jsxs("span",{className:"text-sm text-gray-600",children:["Subtotal: $",(s.price*s.quantity).toFixed(2)]})})]})]})})},s.id)}),e.jsx("div",{className:"text-center pt-4",children:e.jsxs(u,{variant:"ghost",onClick:q,className:"text-gray-500 hover:text-red-500",children:[e.jsx(t,{className:"w-4 h-4 mr-2"}),"Vaciar carrito"]})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(N,{className:"animate-fade-in delay-200",children:e.jsxs(v,{className:"p-6",children:[e.jsxs("h3",{className:"font-semibold text-lg mb-4 flex items-center gap-2",children:[e.jsx(c,{className:"w-5 h-5 text-delivery-500"}),"Método de entrega"]}),e.jsx("div",{className:"space-y-3",children:p.map(s=>e.jsxs("label",{className:y("flex items-center justify-between p-3 border rounded-lg cursor-pointer transition-colors",M===s.id?"border-brand-500 bg-brand-50":"border-gray-200 hover:border-gray-300"),children:[e.jsx("input",{type:"radio",name:"delivery",value:s.id,checked:M===s.id,onChange:e=>W(e.target.value),className:"sr-only"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-xl",children:s.icon}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-sm",children:s.name}),e.jsx("div",{className:"text-xs text-gray-600",children:s.time})]})]}),e.jsx("div",{className:"font-semibold text-sm",children:0===s.price?"Gratis":`$${s.price}`})]},s.id))})]})}),e.jsx(N,{className:"animate-fade-in delay-300",children:e.jsxs(v,{className:"p-6",children:[e.jsxs("h3",{className:"font-semibold text-lg mb-4 flex items-center gap-2",children:[e.jsx(r,{className:"w-5 h-5 text-green-500"}),"Código promocional"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(b,{placeholder:"Ingresa tu código",value:D,onChange:e=>A(e.target.value),className:"flex-1"}),e.jsx(u,{onClick:()=>{return e=null,s=null,a=function*(){L(!0),yield new Promise(e=>setTimeout(e,1e3)),L(!1)},new Promise((t,l)=>{var i=e=>{try{r(a.next(e))}catch(s){l(s)}},c=e=>{try{r(a.throw(e))}catch(s){l(s)}},r=e=>e.done?t(e.value):Promise.resolve(e.value).then(i,c);r((a=a.apply(e,s)).next())});var e,s,a},disabled:!D||G,className:"btn-gradient",children:G?"...":"Aplicar"})]}),"WELCOME10"===D&&O>0&&e.jsxs("div",{className:"mt-2 text-sm text-green-600 flex items-center gap-1",children:[e.jsx(n,{className:"w-4 h-4"}),"¡Código aplicado! Descuento del 10%"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Prueba el código: WELCOME10"})]})}),e.jsx(N,{className:"animate-fade-in delay-400",children:e.jsxs(v,{className:"p-6",children:[e.jsx("h3",{className:"font-semibold text-lg mb-4",children:"Resumen del pedido"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{children:["Subtotal (",E," ",1===E?"producto":"productos",")"]}),e.jsxs("span",{children:["$",$.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{children:["Envío (",null==T?void 0:T.name,")"]}),e.jsx("span",{children:0===I?"Gratis":`$${I}`})]}),O>0&&e.jsxs("div",{className:"flex justify-between text-sm text-green-600",children:[e.jsx("span",{children:"Descuento promocional"}),e.jsxs("span",{children:["-$",O.toFixed(2)]})]}),e.jsx(k,{}),e.jsxs("div",{className:"flex justify-between font-semibold text-lg",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["$",V.toFixed(2)]})]})]}),e.jsxs("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(d,{className:"w-4 h-4"}),e.jsxs("span",{children:["Tiempo estimado: ",null==T?void 0:T.time]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 mt-1",children:[e.jsx(x,{className:"w-4 h-4"}),e.jsx("span",{children:"Polanco, CDMX"})]})]}),e.jsx(u,{size:"lg",className:"w-full mt-6 btn-gradient shadow-glow",disabled:S.some(e=>!(null==e?void 0:e.inStock)),asChild:!0,children:e.jsxs(h,{to:"/checkout",children:[e.jsx(m,{className:"w-5 h-5 mr-2"}),"Proceder al pago"]})}),S.some(e=>!(null==e?void 0:e.inStock))&&e.jsx("p",{className:"text-sm text-red-600 text-center mt-2",children:"Algunos productos no están disponibles"})]})})]})]})]})]})};export{P as default};
