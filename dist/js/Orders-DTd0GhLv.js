import{j as e,av as s,aa as a,aZ as t,ap as l,a_ as r,at as i,aM as c,aK as n,a$ as d,a5 as o,as as m,aG as x,b0 as h,aD as j}from"./chunk-D1ivKm1I.js";import{a as p,L as g}from"./chunk-CNNdbZTC.js";import{m as u,N,B as b,C as f,e as v,I as y,b as w,d as C,D as T,q as D,r as q,t as M,v as A,w as P}from"./index-17eEFbcJ.js";import{S as k,a as L,b as E,c as R,d as I}from"./chunk-DQJYHBrk.js";import"./chunk-DGERTDnL.js";import"./chunk-BdChqvju.js";import"./chunk-B5XYL1Sr.js";const S=[{id:"ORD-2024-001",date:"2024-01-15T14:30:00",status:"entregado",total:89.5,deliveryAddress:"Av. Polanco 123, Polanco, CDMX",deliveredTime:"2024-01-15T15:15:00",paymentMethod:"Tarjeta terminada en 4532",items:[{id:"1",name:"Leche entera Lala 1L",image:"https://images.unsplash.com/photo-1550583724-b2692b85b150?auto=format&fit=crop&w=100&q=80",price:28.5,quantity:2,brand:"Lala"},{id:"2",name:"Pan blanco Bimbo",image:"https://images.unsplash.com/photo-1509440159596-0249088772ff?auto=format&fit=crop&w=100&q=80",price:32.5,quantity:1,brand:"Bimbo"}]},{id:"ORD-2024-002",date:"2024-01-12T09:15:00",status:"entregado",total:125.3,deliveryAddress:"Av. Polanco 123, Polanco, CDMX",deliveredTime:"2024-01-12T10:00:00",paymentMethod:"Mercado Pago",items:[{id:"3",name:"Manzanas Red Delicious 1kg",image:"https://images.unsplash.com/photo-1560806887-1e4cd0b6cbd6?auto=format&fit=crop&w=100&q=80",price:45,quantity:1},{id:"4",name:"Yogurt griego Danone 150g",image:"https://images.unsplash.com/photo-1571212515416-cd04ae201171?auto=format&fit=crop&w=100&q=80",price:18.9,quantity:4,brand:"Danone"}]},{id:"ORD-2024-003",date:"2024-01-08T16:45:00",status:"en_camino",total:67.8,deliveryAddress:"Av. Polanco 123, Polanco, CDMX",estimatedTime:"17:30",trackingNumber:"TRK-789012",paymentMethod:"Efectivo",items:[{id:"5",name:"Coca-Cola 600ml",image:"https://images.unsplash.com/photo-1581636625402-29b2a704ef13?auto=format&fit=crop&w=100&q=80",price:15,quantity:3,brand:"Coca-Cola"}]},{id:"ORD-2024-004",date:"2024-01-05T11:20:00",status:"cancelado",total:45.6,deliveryAddress:"Av. Polanco 123, Polanco, CDMX",paymentMethod:"Tarjeta terminada en 4532",notes:"Cancelado por el cliente",items:[{id:"6",name:"Cereal Zucaritas 500g",image:"https://images.unsplash.com/photo-1556909114-4c3b58f5e5e8?auto=format&fit=crop&w=100&q=80",price:45.6,quantity:1,brand:"Kellogg's"}]}],$=()=>{const{user:$,isAuthenticated:_}=u(),[z,X]=p.useState(""),[B,O]=p.useState("all"),[F,K]=p.useState(null),V=p.useMemo(()=>{let e=S;return z&&(e=e.filter(e=>e.id.toLowerCase().includes(z.toLowerCase())||e.items.some(e=>e.name.toLowerCase().includes(z.toLowerCase())))),"all"!==B&&(e=e.filter(e=>e.status===B)),e.sort((e,s)=>new Date(s.date).getTime()-new Date(e.date).getTime())},[z,B]),Z=a=>{switch(a){case"preparando":return{label:"Preparando",color:"bg-yellow-100 text-yellow-700 border-yellow-200",icon:e.jsx(s,{className:"w-4 h-4"})};case"en_camino":return{label:"En camino",color:"bg-blue-100 text-blue-700 border-blue-200",icon:e.jsx(j,{className:"w-4 h-4"})};case"entregado":return{label:"Entregado",color:"bg-green-100 text-green-700 border-green-200",icon:e.jsx(c,{className:"w-4 h-4"})};case"cancelado":return{label:"Cancelado",color:"bg-red-100 text-red-700 border-red-200",icon:e.jsx(h,{className:"w-4 h-4"})};default:return{label:"Desconocido",color:"bg-gray-100 text-gray-700 border-gray-200",icon:e.jsx(s,{className:"w-4 h-4"})}}},G=e=>new Date(e).toLocaleDateString("es-MX",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return _?e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(N,{}),e.jsxs("div",{className:"container px-4 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"font-display font-bold text-2xl md:text-3xl text-gray-900 mb-2",children:"Mis pedidos"}),e.jsx("p",{className:"text-gray-600",children:"Revisa el estado y historial de todos tus pedidos"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[e.jsx(f,{children:e.jsxs(v,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900 mb-1",children:S.length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total de pedidos"})]})}),e.jsx(f,{children:e.jsxs(v,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600 mb-1",children:S.filter(e=>"entregado"===e.status).length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Entregados"})]})}),e.jsx(f,{children:e.jsxs(v,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600 mb-1",children:S.filter(e=>"en_camino"===e.status).length}),e.jsx("div",{className:"text-sm text-gray-600",children:"En camino"})]})}),e.jsx(f,{children:e.jsxs(v,{className:"p-4 text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-brand-600 mb-1",children:["$",S.reduce((e,s)=>e+s.total,0).toFixed(2)]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total gastado"})]})})]}),e.jsx("div",{className:"mb-6 space-y-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(a,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(y,{placeholder:"Buscar por número de pedido o producto...",value:z,onChange:e=>X(e.target.value),className:"pl-10"})]}),e.jsxs(k,{value:B,onValueChange:O,children:[e.jsx(L,{className:"w-full sm:w-48",children:e.jsx(E,{placeholder:"Filtrar por estado"})}),e.jsxs(R,{children:[e.jsx(I,{value:"all",children:"Todos los estados"}),e.jsx(I,{value:"preparando",children:"Preparando"}),e.jsx(I,{value:"en_camino",children:"En camino"}),e.jsx(I,{value:"entregado",children:"Entregado"}),e.jsx(I,{value:"cancelado",children:"Cancelado"})]})]})]})}),V.length>0?e.jsx("div",{className:"space-y-4",children:V.map((a,x)=>{const h=Z(a.status);return e.jsx(f,{className:"animate-slide-in delay-"+100*x,children:e.jsx(v,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 mb-3",children:[e.jsx("h3",{className:"font-semibold text-lg",children:a.id}),e.jsxs(w,{className:C("w-fit",h.color),children:[h.icon,e.jsx("span",{className:"ml-1",children:h.label})]})]}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(t,{className:"w-4 h-4"}),e.jsx("span",{children:G(a.date)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(l,{className:"w-4 h-4"}),e.jsx("span",{children:a.deliveryAddress})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(r,{className:"w-4 h-4"}),e.jsxs("span",{children:[a.items.length," productos • $",a.total]})]}),"en_camino"===a.status&&a.estimatedTime&&e.jsxs("div",{className:"flex items-center gap-2 text-blue-600",children:[e.jsx(i,{className:"w-4 h-4"}),e.jsxs("span",{children:["Llega aproximadamente a las"," ",a.estimatedTime]})]}),"entregado"===a.status&&a.deliveredTime&&e.jsxs("div",{className:"flex items-center gap-2 text-green-600",children:[e.jsx(c,{className:"w-4 h-4"}),e.jsxs("span",{children:["Entregado el ",G(a.deliveredTime)]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-4",children:[a.items.slice(0,3).map(s=>e.jsx("img",{src:s.image,alt:s.name,className:"w-10 h-10 rounded-lg object-cover bg-gray-100"},s.id)),a.items.length>3&&e.jsxs("div",{className:"w-10 h-10 rounded-lg bg-gray-100 flex items-center justify-center text-xs text-gray-600",children:["+",a.items.length-3]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsxs(T,{children:[e.jsx(D,{asChild:!0,children:e.jsxs(b,{variant:"outline",size:"sm",onClick:()=>K(a),children:[e.jsx(n,{className:"w-4 h-4 mr-2"}),"Ver detalles"]})}),e.jsxs(q,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(M,{children:[e.jsxs(A,{children:["Detalles del pedido ",a.id]}),e.jsx(P,{children:"Información completa de tu pedido"})]}),F&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(w,{className:C("",Z(F.status).color),children:[Z(F.status).icon,e.jsx("span",{className:"ml-1",children:Z(F.status).label})]}),e.jsx("span",{className:"text-sm text-gray-600",children:G(F.date)})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-semibold",children:"Información de entrega"}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(l,{className:"w-4 h-4 text-gray-600"}),e.jsx("span",{children:F.deliveryAddress})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(r,{className:"w-4 h-4 text-gray-600"}),e.jsx("span",{children:F.paymentMethod})]}),F.trackingNumber&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(s,{className:"w-4 h-4 text-gray-600"}),e.jsxs("span",{children:["Seguimiento:"," ",F.trackingNumber]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h4",{className:"font-semibold",children:["Productos (",F.items.length,")"]}),e.jsx("div",{className:"space-y-3",children:F.items.map(s=>e.jsxs("div",{className:"flex items-center gap-3 p-3 border rounded-lg",children:[e.jsx("img",{src:s.image,alt:s.name,className:"w-12 h-12 rounded-lg object-cover"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-sm",children:s.name}),s.brand&&e.jsx("p",{className:"text-xs text-gray-600",children:s.brand}),e.jsxs("p",{className:"text-sm text-gray-600",children:[s.quantity,"x $",s.price]})]}),e.jsxs("p",{className:"font-semibold",children:["$",(s.price*s.quantity).toFixed(2)]})]},s.id))})]}),e.jsx("div",{className:"border-t pt-4",children:e.jsxs("div",{className:"flex justify-between items-center font-semibold text-lg",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["$",F.total]})]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(b,{variant:"outline",className:"flex-1",children:[e.jsx(d,{className:"w-4 h-4 mr-2"}),"Descargar factura"]}),"entregado"===F.status&&e.jsxs(b,{className:"flex-1 btn-gradient",children:[e.jsx(o,{className:"w-4 h-4 mr-2"}),"Volver a pedir"]})]})]})]})]}),"entregado"===a.status&&e.jsxs(b,{variant:"outline",size:"sm",children:[e.jsx(m,{className:"w-4 h-4 mr-2"}),"Calificar"]}),"entregado"===a.status&&e.jsxs(b,{size:"sm",className:"btn-gradient",children:[e.jsx(o,{className:"w-4 h-4 mr-2"}),"Repetir"]})]})]})})},a.id)})}):e.jsxs("div",{className:"text-center py-16",children:[e.jsx(s,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"font-semibold text-lg text-gray-900 mb-2",children:z||"all"!==B?"No encontramos pedidos":"Aún no tienes pedidos"}),e.jsx("p",{className:"text-gray-600 mb-6 max-w-md mx-auto",children:z||"all"!==B?"Intenta ajustar tus filtros de búsqueda":"Cuando hagas tu primer pedido, aparecerá aquí"}),e.jsx("div",{className:"space-y-3",children:z||"all"!==B?e.jsx(b,{onClick:()=>{X(""),O("all")},variant:"outline",children:"Limpiar filtros"}):e.jsx(b,{asChild:!0,className:"btn-gradient",children:e.jsxs(g,{to:"/shop",children:[e.jsx(x,{className:"w-4 h-4 mr-2"}),"Empezar a comprar"]})})})]})]})]}):e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(N,{}),e.jsxs("div",{className:"container px-4 py-16 text-center",children:[e.jsx(s,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Inicia sesión para ver tus pedidos"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Accede a tu cuenta para revisar el historial de pedidos"}),e.jsx(b,{asChild:!0,children:e.jsx(g,{to:"/login",children:"Iniciar sesión"})})]})]})};export{$ as default};
