var e=Object.defineProperty,s=Object.defineProperties,a=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,n=(s,a,r)=>a in s?e(s,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[a]=r,c=(e,s)=>{for(var a in s||(s={}))t.call(s,a)&&n(e,a,s[a]);if(r)for(var a of r(s))l.call(s,a)&&n(e,a,s[a]);return e},o=(e,r)=>s(e,a(r));import{j as i,ag as d,ac as m,aH as p,aL as x,aI as h,aJ as j,aK as f}from"./chunk-D1ivKm1I.js";import{a as u,h as b,u as N,L as y}from"./chunk-CNNdbZTC.js";import{m as v,B as w,C as g,n as k,o as C,e as P,L as T,I as E,d as O}from"./index-17eEFbcJ.js";import{C as S}from"./chunk-BdI_uPPx.js";import"./chunk-DGERTDnL.js";import"./chunk-BdChqvju.js";import"./chunk-B5XYL1Sr.js";const L=()=>{var e,s,a;const[r,t]=u.useState({name:"",email:"",phone:"",password:"",confirmPassword:"",acceptTerms:!1,acceptMarketing:!1}),[l,n]=u.useState(!1),[L,F]=u.useState(!1),[I,M]=u.useState({}),[z,q]=u.useState(!1),{register:D}=v(),A=b(),J=N(),B=(null==(s=null==(e=J.state)?void 0:e.from)?void 0:s.pathname)||"/",H=e=>{const{name:s,value:a}=e.target;t(e=>o(c({},e),{[s]:a})),I[s]&&M(e=>o(c({},e),{[s]:""}))},K=(e,s)=>{t(a=>o(c({},a),{[e]:s})),I[e]&&M(s=>o(c({},s),{[e]:""}))};return i.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-brand-50 to-fresh-50 flex flex-col",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 md:p-6",children:[i.jsxs(w,{variant:"ghost",size:"sm",onClick:()=>A(-1),children:[i.jsx(d,{className:"w-4 h-4 mr-2"}),"Volver"]}),i.jsxs(y,{to:"/",className:"flex items-center space-x-2",children:[i.jsx("div",{className:"h-8 w-8 rounded-lg bg-gradient-to-br from-brand-500 to-fresh-500 flex items-center justify-center",children:i.jsx("span",{className:"text-white font-bold text-sm",children:"LE"})}),i.jsx("span",{className:"font-display font-bold text-xl text-gray-900 hidden sm:block",children:"La Económica"})]})]}),i.jsx("div",{className:"flex-1 flex items-start justify-center p-4 py-8",children:i.jsxs("div",{className:"w-full max-w-md space-y-6",children:[i.jsxs("div",{className:"text-center space-y-2 animate-fade-in",children:[i.jsx("h1",{className:"font-display font-bold text-3xl text-gray-900",children:"Crear cuenta"}),i.jsx("p",{className:"text-gray-600",children:"Únete a La Económica y disfruta de los mejores precios"})]}),i.jsxs(g,{className:"animate-slide-in delay-200",children:[i.jsx(k,{className:"space-y-1 pb-4",children:i.jsx(C,{className:"text-xl text-center",children:"Registro"})}),i.jsxs(P,{className:"space-y-4",children:[i.jsxs("form",{onSubmit:e=>{return s=null,a=null,t=function*(){if(e.preventDefault(),!(()=>{const e={};return r.name.trim()?r.name.trim().length<2&&(e.name="El nombre debe tener al menos 2 caracteres"):e.name="El nombre es requerido",r.email?/\S+@\S+\.\S+/.test(r.email)||(e.email="Email inválido"):e.email="El email es requerido",r.phone&&!/^\+?[\d\s\-\(\)]+$/.test(r.phone)&&(e.phone="Número de teléfono inválido"),r.password?r.password.length<6&&(e.password="La contraseña debe tener al menos 6 caracteres"):e.password="La contraseña es requerida",r.confirmPassword?r.password!==r.confirmPassword&&(e.confirmPassword="Las contraseñas no coinciden"):e.confirmPassword="Confirma tu contraseña",r.acceptTerms||(e.acceptTerms="Debes aceptar los términos y condiciones"),M(e),0===Object.keys(e).length})())return;q(!0);const s=yield D({name:r.name.trim(),email:r.email,password:r.password,phone:r.phone||void 0});s.success?A(B,{replace:!0}):M({general:s.error||"Error al crear la cuenta"}),q(!1)},new Promise((r,l)=>{var n=s=>{try{o(t.next(s))}catch(e){l(e)}},c=s=>{try{o(t.throw(s))}catch(e){l(e)}},o=e=>e.done?r(e.value):Promise.resolve(e.value).then(n,c);o((t=t.apply(s,a)).next())});var s,a,t},className:"space-y-4",children:[I.general&&i.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg text-red-600 text-sm",children:I.general}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(T,{htmlFor:"name",className:"text-sm font-medium",children:"Nombre completo"}),i.jsxs("div",{className:"relative",children:[i.jsx(m,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),i.jsx(E,{id:"name",name:"name",type:"text",placeholder:"Juan Pérez",value:r.name,onChange:H,className:O("pl-10 h-12",I.name&&"border-red-500 focus:border-red-500"),disabled:z})]}),I.name&&i.jsx("p",{className:"text-red-500 text-sm",children:I.name})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(T,{htmlFor:"email",className:"text-sm font-medium",children:"Email"}),i.jsxs("div",{className:"relative",children:[i.jsx(p,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),i.jsx(E,{id:"email",name:"email",type:"email",placeholder:"tu@email.com",value:r.email,onChange:H,className:O("pl-10 h-12",I.email&&"border-red-500 focus:border-red-500"),disabled:z})]}),I.email&&i.jsx("p",{className:"text-red-500 text-sm",children:I.email})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(T,{htmlFor:"phone",className:"text-sm font-medium",children:["Teléfono ",i.jsx("span",{className:"text-gray-400",children:"(opcional)"})]}),i.jsxs("div",{className:"relative",children:[i.jsx(x,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),i.jsx(E,{id:"phone",name:"phone",type:"tel",placeholder:"+52 55 1234 5678",value:r.phone,onChange:H,className:O("pl-10 h-12",I.phone&&"border-red-500 focus:border-red-500"),disabled:z})]}),I.phone&&i.jsx("p",{className:"text-red-500 text-sm",children:I.phone})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(T,{htmlFor:"password",className:"text-sm font-medium",children:"Contraseña"}),i.jsxs("div",{className:"relative",children:[i.jsx(h,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),i.jsx(E,{id:"password",name:"password",type:l?"text":"password",placeholder:"••••••••",value:r.password,onChange:H,className:O("pl-10 pr-10 h-12",I.password&&"border-red-500 focus:border-red-500"),disabled:z}),i.jsx(w,{type:"button",variant:"ghost",size:"sm",className:"absolute right-2 top-1/2 transform -translate-y-1/2 h-8 w-8 p-0",onClick:()=>n(!l),children:l?i.jsx(j,{className:"h-4 w-4"}):i.jsx(f,{className:"h-4 w-4"})})]}),I.password&&i.jsx("p",{className:"text-red-500 text-sm",children:I.password})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(T,{htmlFor:"confirmPassword",className:"text-sm font-medium",children:"Confirmar contraseña"}),i.jsxs("div",{className:"relative",children:[i.jsx(h,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),i.jsx(E,{id:"confirmPassword",name:"confirmPassword",type:L?"text":"password",placeholder:"••••••••",value:r.confirmPassword,onChange:H,className:O("pl-10 pr-10 h-12",I.confirmPassword&&"border-red-500 focus:border-red-500"),disabled:z}),i.jsx(w,{type:"button",variant:"ghost",size:"sm",className:"absolute right-2 top-1/2 transform -translate-y-1/2 h-8 w-8 p-0",onClick:()=>F(!L),children:L?i.jsx(j,{className:"h-4 w-4"}):i.jsx(f,{className:"h-4 w-4"})})]}),I.confirmPassword&&i.jsx("p",{className:"text-red-500 text-sm",children:I.confirmPassword})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-start space-x-2",children:[i.jsx(S,{id:"acceptTerms",checked:r.acceptTerms,onCheckedChange:e=>K("acceptTerms",e),className:O("mt-1",I.acceptTerms&&"border-red-500"),disabled:z}),i.jsxs(T,{htmlFor:"acceptTerms",className:"text-sm leading-relaxed cursor-pointer",children:["Acepto los"," ",i.jsx(y,{to:"/terms",className:"text-brand-600 hover:text-brand-700 underline",children:"términos y condiciones"})," ","y la"," ",i.jsx(y,{to:"/privacy",className:"text-brand-600 hover:text-brand-700 underline",children:"política de privacidad"})]})]}),I.acceptTerms&&i.jsx("p",{className:"text-red-500 text-sm",children:I.acceptTerms}),i.jsxs("div",{className:"flex items-start space-x-2",children:[i.jsx(S,{id:"acceptMarketing",checked:r.acceptMarketing,onCheckedChange:e=>K("acceptMarketing",e),disabled:z}),i.jsx(T,{htmlFor:"acceptMarketing",className:"text-sm leading-relaxed cursor-pointer text-gray-600",children:"Acepto recibir ofertas y promociones por email"})]})]}),i.jsx(w,{type:"submit",className:"w-full h-12 btn-gradient shadow-glow",disabled:z,children:z?i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),"Creando cuenta..."]}):"Crear cuenta"})]}),i.jsx("div",{className:"text-center pt-4",children:i.jsxs("p",{className:"text-sm text-gray-600",children:["¿Ya tienes cuenta?"," ",i.jsx(y,{to:"/login",state:{from:null==(a=J.state)?void 0:a.from},className:"text-brand-600 hover:text-brand-700 font-medium",children:"Iniciar sesión"})]})})]})]})]})})]})};export{L as default};
